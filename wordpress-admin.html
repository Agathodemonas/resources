<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
	<title>WORDPRESS Admin Snippets</title>
	<meta name='Generator' content='Zim 0.72.1'>
	<!--link rel="stylesheet" href="https://inner-wise.com/help/css/normalize.css"-->
	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<style type='text/css'>
		body {
			background-color: #fff;
			color: #000;
			font-size: normal;
		}

		a {
			text-decoration: none
		}

		a:hover {
			text-decoration: underline
		}

		a:active {
			text-decoration: underline
		}

		strike {
			color: grey
		}

		u {
			text-decoration: none;
			background-color: yellow
		}

		tt {
			color: #2e3436;
		}

		pre {
			background-color: lightyellow;
			padding: .6rem;
		}

		code:before {
			content: "\0024\ ";
			font-weight: 600;
		}

		h1 {
			text-decoration: underline;
			color: #4e9a06;
			margin-bottom: 0
		}

		h2 {
			color: #4e9a06;
			margin-bottom: 0
		}

		h3 {
			color: #4e9a06;
			margin-bottom: 0
		}

		h4 {
			color: #4e9a06;
			margin-bottom: 0
		}

		h5 {
			color: #000;
			margin-bottom: 0
		}

		p {
			margin-top: 0;
			font-size: .9rem;
		}

		ol {
			font-size: small;
		}

		span.zim-tag {
			color: #ce5c00;
		}

		div.zim-object {
			border-style: solid;
			border-width: 1px;
		}

		.checked-box {
			list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)
		}

		.xchecked-box {
			list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)
		}

		.unchecked-box {
			list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)
		}

		.migrated-box {
			list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)
		}

		ul {
			list-style-image: none
		}

		/* ul rule needed to reset style for sub-bullets */

		.bar {
			background-color: #E0E0FF;
			margin: 0
		}

		.nav {
			color: grey;
			font-size: small
		}
	</style>
</head>

<body>

<table width="100%" height="100%" border="0" cellpadding="5" cellspacing="0">
<tr>
<td colspan="3" align="center" valign="middle" class="bar">
<h3 class='bar'>WORDPRESS</h3>
</td>
</tr>
<tr>
<td width="5%">&nbsp;</td>
<td width="90%" height="90%" align="center" valign="top">

<table>
<tr>
<td align='left'>
	<!-- Wiki content -->

	<p>Created Monday 04 March 2013</p>

	<h3>Set First Image as Featured Image for all wordpress posts</h3>
<pre> 
<code>insert into wp_postmeta (meta_value, meta_key, post_id)
	select DISTINCT(ID), post_type , post_parent from wp_posts
	where post_type= 'attachment' and post_parent !=0 and post_status='inherit';
	update wp_postmeta set meta_key = '_thumbnail_id' where meta_key='attachment'
</code>
</pre>
	<ol type="1" start="1">
		<li>We are inserting Image Attachment ID for every Post ID into POSTMETA table by
			fetching these details using simple SQL query which fetches the first image details.
		</li>
		<li>Now, We are updating POSTMETA table to set the inserted image as Featured Image.
		</li>
	</ol>

	<hr>

<h3>Change wordpress Domain or URL</h3>
<br>
<h5>Change URL-DOMAIN with WP-CLI </h5>
<pre>
<code>wp db export </code>
<code>wp search-replace 'olddomain.com' 'newdomain.com' ( --dry-run ) </code>
</pre>

<h5>Change Siteurl &amp; Homeurl</h5>
<pre>
<code>UPDATE wp_options
	SET option_value = replace(option_value, 'http://www.oldsiteurl.com', 'http://www.newsiteurl.com')
	WHERE option_name = 'home'
	OR option_name = 'siteurl';
</code>
</pre>

<h5>Change GUID</h5>
<pre>
<code>UPDATE wp_posts SET guid = REPLACE (guid, 'http://www.oldsiteurl.com', 'http://www.newsiteurl.com');
</code>
</pre>

<h5>Change URL in Content</h5>
<pre>
<code>UPDATE wp_posts
	SET post_content = REPLACE (post_content, 'http://www.oldsiteurl.com', 'http://www.newsiteurl.com');
</code>
</pre>
<h5>Change Image Path Only</h5>
	<pre>
<code>UPDATE wp_posts SET post_content = REPLACE (post_content, 'src="http://www.oldsiteurl.com', 'src="http://yourcdn.newsiteurl.com');</code>
</pre>
	<p>
		<i>You will also need to update the GUID for Image Attachment with the following
			query:</i>
	</p>
	<pre>
<code>UPDATE wp_posts SET  guid = REPLACE (guid, 'http://www.oldsiteurl.com', 'http://yourcdn.newsiteurl.com') WHERE post_type = 'attachment';</code>
</pre>

<h5>Update Post Meta</h5>
<pre>
<code>UPDATE wp_postmeta SET meta_value = REPLACE (meta_value, 'http://www.oldsiteurl.com','http://www.newsiteurl.com');</code>
</pre>

<hr>

<h3>Change Default "Admin" Username</h3>
<pre>
<code>UPDATE wp_users SET user_login = 'Your New Username' WHERE user_login = 'Admin';</code>
</pre>

<hr>

<h3>Delete Revision</h3>
<pre>
<code>DELETE a,b,c FROM wp_posts a
	LEFT JOIN wp_term_relationships b ON (a.ID = b.object_id)
	LEFT JOIN wp_postmeta c ON (a.ID = c.post_id)
	WHERE a.post_type = 'revision'</code>
</pre>

	<hr>

	<h3>Delete Post Meta</h3>
	<pre>
<code>DELETE FROM wp_postmeta WHERE meta_key = 'your-meta-key';</code>
</pre>

	<hr>

	<h3>Export all Comment Emails with no Duplicate</h3>
<pre>
<code>SELECT DISTINCT comment_author_email FROM wp_comments;</code>
</pre>

	<hr>

	<h3>Delete all Pingback</h3>
	<pre>
<code>DELETE FROM wp_comments WHERE comment_type = 'pingback';</code>
</pre>

	<hr>

	<h3>Delete all Spam Comments</h3>
	<pre>
<code>DELETE FROM wp_comments WHERE comment_approved = 'spam';</code>
</pre>
	<p>
		0 = Comment Awaiting Moderation<br>
		1 = Approved Comment<br>
		spam = Comment marked as Spam
	</p>

	<hr>

	<h3>Identify Unused Tags</h3>
	<pre>
<code>SELECT * From wp_terms wtUPDATE wp_posts 
	SET guid = REPLACE (guid, 'http://www.oldsiteurl.com', 'http://yourcdn.newsiteurl.com') WHERE post_type = 'attachment';
	Update Post Meta
	INNER JOIN wp_term_taxonomy wtt ON wt.term_id=wtt.term_id WHERE wtt.taxonomy='post_tag' AND wtt.count=0;</code>
</pre>

	<hr>

	<h3>Disable all Plugins</h3>
	<pre>
<code>UPDATE wp_options SET option_value = 'a:0:{}' WHERE option_name = 'active_plugins';</code>
</pre>

	<hr>

	<h3>Disable Comments on Older Posts</h3>
	<pre>
<code>UPDATE wp_posts SET comment_status = 'closed' WHERE post_date &lt; '2010-01-01' AND post_status = 'publish';</code>
</pre>

	<hr>

	<h3>Disabling and Enabling Trackbacks &amp; Pingbacks</h3>
	<pre>
<code>UPDATE wp_posts SET ping_status = 'open';</code>
<code>UPDATE wp_posts SET ping_status = 'closed';</code>
</pre>

	<hr>

	<h3>Enable/Disable Pingbacks &amp; Trackbacks Before a Certain Date</h3>
	<pre>
<code>DELETE from wp_comments WHERE comment_author_url LIKE "%nastyspamurl%" ;</code>
</pre>

	<hr>

	<h3>Identify &amp; Delete Posts that are over ‘X’ Days Old</h3>
	<pre>
<code>SELECT * FROM `wp_posts`
	WHERE `post_type` = 'post'
	AND DATEDIFF(NOW(), `post_date`) &gt; X</code>
</pre>
	------
	<pre>
<code>DELETE FROM `wp_posts`
	WHERE `post_type` = 'post'
	AND DATEDIFF(NOW(), `post_date`) &gt; X</code>
</pre>

	<hr>

	<h3>Change Your WP Posts Into Pages and Vice-Versa</h3>
	<pre>
<code>UPDATE wp_posts SET post_type = 'page' WHERE post_type = 'post'</code>
<code>UPDATE wp_posts SET post_type = 'post' WHERE post_type = 'page'</code>
</pre>

	<hr>

	<h3>Change Author Attribution On All Posts</h3>
	<pre>
<code>SELECT ID, display_name FROM wp_users;</code>
<code>UPDATE wp_posts SET post_author=NEW_AUTHOR_ID WHERE post_author=OLD_AUTHOR_ID;</code>
</pre>

	<hr>

	<h3>Disable or Enable All WordPress Plugins</h3>
	<pre>
<code>UPDATE wp_options SET option_value = 'a:0:{}' WHERE option_name = 'active_plugins';</code>
</pre>

	<hr>

	<h3>Manually Reset your WordPress Password</h3>
	<pre>
<code>UPDATE `wordpress`.`wp_users` SET `user_pass` = MD5('PASSWORD') WHERE `wp_users`.`user_login` =`admin` LIMIT 1;</code>
</pre>

	<hr>

	<h3>Search and Replace Post Content</h3>
	<pre>
<code>UPDATE wp_posts SET 
	`post_content` = REPLACE (`post_content`, 'OriginalText', 'ReplacedText');</code>
</pre>

	<hr>

	<h3>Install wordpress with wp-cli</h3>
	<pre>
<code>wp core install --url=url --title=site-title [--admin_name=username] --admin_email=email --admin_password=password</code>
</pre>
	<p>OR</p>
	<pre>
<code>wp core install --url="your_domain"
--title="Blog Title"
--admin_user="admin username"
--admin_password="enter_your_password"
--admin_email="enter_your_email"</code>
</pre>

	<hr>

	<h3>Backup only original images of your WordPress site using WP-CLI</h3>
	<p>Export the images list with wp-cli</p>
	<pre>
<code>wp post list --post_type=attachment --field=guid &gt; wp-content/uploads/site-images.txt</code>
</pre>
	<p>then download the images with wget by addin -x to force create directories</p>
	<pre>
<code>wget -xi https://yousite.com/wp-content/uploads/site-images.txt</code>
</pre>

	<!-- End wiki content -->

</tr>
</td>
</table>

</td>
<td width="5%">&nbsp;</td>
</tr>
<tr>
<td colspan="3" align="center" valign="middle">
<span class="nav">&lt;</span><a href='None' class="nav">+</a><span class="nav">&gt;</span>
</td>
</tr>
</table>


	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-166768780-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'UA-166768780-1');
	</script>

</body>

</html>